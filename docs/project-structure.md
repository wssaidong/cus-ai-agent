# é¡¹ç›®ç»“æ„è¯´æ˜

æœ¬æ–‡æ¡£è¯¦ç»†è¯´æ˜é¡¹ç›®çš„ç›®å½•ç»“æ„å’Œæ–‡ä»¶ç»„ç»‡ã€‚

## ğŸ“ ç›®å½•æ ‘

```
cus-ai-agent/
â”œâ”€â”€ .github/                    # GitHub é…ç½®
â”‚   â”œâ”€â”€ ISSUE_TEMPLATE/        # Issue æ¨¡æ¿
â”‚   â”‚   â”œâ”€â”€ bug_report.md      # Bug æŠ¥å‘Šæ¨¡æ¿
â”‚   â”‚   â””â”€â”€ feature_request.md # åŠŸèƒ½è¯·æ±‚æ¨¡æ¿
â”‚   â””â”€â”€ PULL_REQUEST_TEMPLATE.md # PR æ¨¡æ¿
â”œâ”€â”€ docs/                       # æ–‡æ¡£ç›®å½•
â”‚   â”œâ”€â”€ README.md              # æ–‡æ¡£ç´¢å¼•
â”‚   â”œâ”€â”€ quickstart.md          # å¿«é€Ÿå¼€å§‹
â”‚   â”œâ”€â”€ architecture.md        # æ¶æ„è®¾è®¡
â”‚   â”œâ”€â”€ architecture-diagram.md # æ¶æ„å›¾
â”‚   â”œâ”€â”€ api-reference.md       # API å‚è€ƒ
â”‚   â”œâ”€â”€ development-guide.md   # å¼€å‘æŒ‡å—
â”‚   â”œâ”€â”€ deployment.md          # éƒ¨ç½²æŒ‡å—
â”‚   â”œâ”€â”€ usage_examples.md      # ä½¿ç”¨ç¤ºä¾‹
â”‚   â”œâ”€â”€ troubleshooting.md     # æ•…éšœæ’æŸ¥
â”‚   â”œâ”€â”€ faq.md                 # å¸¸è§é—®é¢˜
â”‚   â”œâ”€â”€ rag_milvus_integration.md # RAG é›†æˆ
â”‚   â””â”€â”€ langsmith_integration.md  # LangSmith é›†æˆ
â”œâ”€â”€ scripts/                    # è„šæœ¬ç›®å½•
â”‚   â”œâ”€â”€ install.sh             # å®‰è£…è„šæœ¬
â”‚   â”œâ”€â”€ start.sh               # å¯åŠ¨è„šæœ¬
â”‚   â”œâ”€â”€ start_milvus.sh        # Milvus å¯åŠ¨è„šæœ¬
â”‚   â””â”€â”€ test_api.sh            # API æµ‹è¯•è„šæœ¬
â”œâ”€â”€ src/                        # æºä»£ç ç›®å½•
â”‚   â”œâ”€â”€ agent/                 # æ™ºèƒ½ä½“æ ¸å¿ƒ
â”‚   â”‚   â”œâ”€â”€ __init__.py
â”‚   â”‚   â”œâ”€â”€ graph.py           # LangGraph å›¾å®šä¹‰
â”‚   â”‚   â”œâ”€â”€ nodes.py           # èŠ‚ç‚¹å®ç°
â”‚   â”‚   â””â”€â”€ state.py           # çŠ¶æ€å®šä¹‰
â”‚   â”œâ”€â”€ api/                   # API æ¥å£
â”‚   â”‚   â”œâ”€â”€ __init__.py
â”‚   â”‚   â”œâ”€â”€ main.py            # FastAPI åº”ç”¨å…¥å£
â”‚   â”‚   â”œâ”€â”€ routes.py          # å¯¹è¯è·¯ç”±
â”‚   â”‚   â”œâ”€â”€ knowledge_routes.py # çŸ¥è¯†åº“è·¯ç”±
â”‚   â”‚   â””â”€â”€ models.py          # æ•°æ®æ¨¡å‹
â”‚   â”œâ”€â”€ tools/                 # å·¥å…·é›†
â”‚   â”‚   â”œâ”€â”€ __init__.py        # å·¥å…·æ³¨å†Œ
â”‚   â”‚   â”œâ”€â”€ custom_tools.py    # è‡ªå®šä¹‰å·¥å…·
â”‚   â”‚   â”œâ”€â”€ database.py        # æ•°æ®åº“å·¥å…·
â”‚   â”‚   â”œâ”€â”€ api_caller.py      # API è°ƒç”¨å·¥å…·
â”‚   â”‚   â”œâ”€â”€ rag_tool.py        # RAG å·¥å…·
â”‚   â”‚   â”œâ”€â”€ document_loader.py # æ–‡æ¡£åŠ è½½å™¨
â”‚   â”‚   â””â”€â”€ mcp_adapter.py     # MCP å·¥å…·é€‚é…å™¨ï¼ˆä½¿ç”¨ langchain-mcp-adaptersï¼‰
â”‚   â”œâ”€â”€ config/                # é…ç½®
â”‚   â”‚   â”œâ”€â”€ __init__.py
â”‚   â”‚   â””â”€â”€ settings.py        # é…ç½®ç®¡ç†
â”‚   â””â”€â”€ utils/                 # å·¥å…·ç±»
â”‚       â”œâ”€â”€ __init__.py
â”‚       â””â”€â”€ logger.py          # æ—¥å¿—å·¥å…·
â”œâ”€â”€ tests/                      # æµ‹è¯•ç›®å½•
â”‚   â”œâ”€â”€ __init__.py
â”‚   â”œâ”€â”€ test_api.py            # API æµ‹è¯•
â”‚   â”œâ”€â”€ test_tools.py          # å·¥å…·æµ‹è¯•
â”‚   â””â”€â”€ test_completions.py    # Completions æµ‹è¯•
â”œâ”€â”€ examples/                   # ç¤ºä¾‹ä»£ç 
â”œâ”€â”€ data/                       # æ•°æ®æ–‡ä»¶
â”œâ”€â”€ logs/                       # æ—¥å¿—ç›®å½•
â”œâ”€â”€ volumes/                    # Docker å·
â”‚   â”œâ”€â”€ etcd/                  # Etcd æ•°æ®
â”‚   â”œâ”€â”€ milvus/                # Milvus æ•°æ®
â”‚   â””â”€â”€ minio/                 # MinIO æ•°æ®
â”œâ”€â”€ .env.example               # ç¯å¢ƒå˜é‡ç¤ºä¾‹
â”œâ”€â”€ .gitignore                 # Git å¿½ç•¥æ–‡ä»¶
â”œâ”€â”€ .gitattributes             # Git å±æ€§é…ç½®
â”œâ”€â”€ .editorconfig              # ç¼–è¾‘å™¨é…ç½®
â”œâ”€â”€ CHANGELOG.md               # å˜æ›´æ—¥å¿—
â”œâ”€â”€ CODE_OF_CONDUCT.md         # è¡Œä¸ºå‡†åˆ™
â”œâ”€â”€ CONTRIBUTING.md            # è´¡çŒ®æŒ‡å—
â”œâ”€â”€ Dockerfile                 # Docker é•œåƒ
â”œâ”€â”€ docker-compose.yml         # Docker Compose é…ç½®
â”œâ”€â”€ LICENSE                    # è®¸å¯è¯
â”œâ”€â”€ README.md                  # é¡¹ç›®è¯´æ˜
â”œâ”€â”€ requirements.txt           # Python ä¾èµ–
â””â”€â”€ run.py                     # å¯åŠ¨è„šæœ¬
```

## ğŸ“‚ ç›®å½•è¯´æ˜

### æ ¹ç›®å½•æ–‡ä»¶

| æ–‡ä»¶ | è¯´æ˜ |
|------|------|
| `.env.example` | ç¯å¢ƒå˜é‡é…ç½®ç¤ºä¾‹ |
| `.gitignore` | Git å¿½ç•¥è§„åˆ™ |
| `.gitattributes` | Git æ–‡ä»¶å±æ€§é…ç½® |
| `.editorconfig` | ç¼–è¾‘å™¨ç»Ÿä¸€é…ç½® |
| `CHANGELOG.md` | ç‰ˆæœ¬å˜æ›´è®°å½• |
| `CODE_OF_CONDUCT.md` | ç¤¾åŒºè¡Œä¸ºå‡†åˆ™ |
| `CONTRIBUTING.md` | è´¡çŒ®æŒ‡å— |
| `Dockerfile` | Docker é•œåƒæ„å»ºæ–‡ä»¶ |
| `docker-compose.yml` | Docker Compose é…ç½® |
| `LICENSE` | MIT å¼€æºè®¸å¯è¯ |
| `README.md` | é¡¹ç›®ä¸»æ–‡æ¡£ |
| `requirements.txt` | Python ä¾èµ–åˆ—è¡¨ |
| `run.py` | æœåŠ¡å¯åŠ¨è„šæœ¬ |

### .github/ - GitHub é…ç½®

å­˜æ”¾ GitHub ç›¸å…³çš„é…ç½®æ–‡ä»¶ï¼š

- **ISSUE_TEMPLATE/**: Issue æ¨¡æ¿
  - `bug_report.md`: Bug æŠ¥å‘Šæ¨¡æ¿
  - `feature_request.md`: åŠŸèƒ½è¯·æ±‚æ¨¡æ¿
- **PULL_REQUEST_TEMPLATE.md**: PR æ¨¡æ¿

### docs/ - æ–‡æ¡£ç›®å½•

å­˜æ”¾æ‰€æœ‰é¡¹ç›®æ–‡æ¡£ï¼š

| æ–‡æ¡£ | è¯´æ˜ |
|------|------|
| `README.md` | æ–‡æ¡£ç´¢å¼•å’Œå¯¼èˆª |
| `quickstart.md` | å¿«é€Ÿå¼€å§‹æŒ‡å— |
| `architecture.md` | ç³»ç»Ÿæ¶æ„è®¾è®¡ |
| `architecture-diagram.md` | æ¶æ„å¯è§†åŒ–å›¾è¡¨ |
| `api-reference.md` | API æ¥å£æ–‡æ¡£ |
| `development-guide.md` | å¼€å‘è€…æŒ‡å— |
| `deployment.md` | éƒ¨ç½²æŒ‡å— |
| `usage_examples.md` | ä½¿ç”¨ç¤ºä¾‹ |
| `troubleshooting.md` | æ•…éšœæ’æŸ¥ |
| `faq.md` | å¸¸è§é—®é¢˜ |
| `rag_milvus_integration.md` | RAG é›†æˆæŒ‡å— |
| `langsmith_integration.md` | LangSmith é›†æˆ |

### scripts/ - è„šæœ¬ç›®å½•

å­˜æ”¾å„ç§è‡ªåŠ¨åŒ–è„šæœ¬ï¼š

| è„šæœ¬ | è¯´æ˜ |
|------|------|
| `install.sh` | ä¾èµ–å®‰è£…è„šæœ¬ |
| `start.sh` | æœåŠ¡å¯åŠ¨è„šæœ¬ |
| `start_milvus.sh` | Milvus å¯åŠ¨è„šæœ¬ |
| `test_api.sh` | API æµ‹è¯•è„šæœ¬ |

### src/ - æºä»£ç ç›®å½•

#### src/agent/ - æ™ºèƒ½ä½“æ ¸å¿ƒ

æ™ºèƒ½ä½“çš„æ ¸å¿ƒé€»è¾‘ï¼š

| æ–‡ä»¶ | è¯´æ˜ |
|------|------|
| `graph.py` | LangGraph å›¾å®šä¹‰å’Œç¼–æ’ |
| `nodes.py` | èŠ‚ç‚¹å®ç°ï¼ˆå…¥å£ã€LLMã€è¾“å‡ºç­‰ï¼‰ |
| `state.py` | çŠ¶æ€å®šä¹‰å’Œç±»å‹ |

#### src/api/ - API æ¥å£

FastAPI åº”ç”¨å’Œè·¯ç”±ï¼š

| æ–‡ä»¶ | è¯´æ˜ |
|------|------|
| `main.py` | FastAPI åº”ç”¨å…¥å£ |
| `routes.py` | å¯¹è¯ç›¸å…³è·¯ç”± |
| `knowledge_routes.py` | çŸ¥è¯†åº“ç›¸å…³è·¯ç”± |
| `models.py` | Pydantic æ•°æ®æ¨¡å‹ |

#### src/tools/ - å·¥å…·é›†

å„ç§å·¥å…·å®ç°ï¼š

| æ–‡ä»¶ | è¯´æ˜ |
|------|------|
| `__init__.py` | å·¥å…·æ³¨å†Œå’Œç®¡ç† |
| `custom_tools.py` | è‡ªå®šä¹‰å·¥å…·ï¼ˆè®¡ç®—å™¨ã€æ–‡æœ¬å¤„ç†ï¼‰ |
| `database.py` | æ•°æ®åº“æŸ¥è¯¢å·¥å…· |
| `api_caller.py` | HTTP API è°ƒç”¨å·¥å…· |
| `rag_tool.py` | RAG çŸ¥è¯†åº“å·¥å…· |
| `document_loader.py` | æ–‡æ¡£åŠ è½½å™¨ |
| `mcp_adapter.py` | MCP å·¥å…·é€‚é…å™¨ï¼ˆä½¿ç”¨ langchain-mcp-adaptersï¼‰ |

#### src/config/ - é…ç½®

é…ç½®ç®¡ç†ï¼š

| æ–‡ä»¶ | è¯´æ˜ |
|------|------|
| `settings.py` | é…ç½®ç±»å’Œç¯å¢ƒå˜é‡åŠ è½½ |

#### src/utils/ - å·¥å…·ç±»

é€šç”¨å·¥å…·ç±»ï¼š

| æ–‡ä»¶ | è¯´æ˜ |
|------|------|
| `logger.py` | æ—¥å¿—é…ç½®å’Œç®¡ç† |

### tests/ - æµ‹è¯•ç›®å½•

å•å…ƒæµ‹è¯•å’Œé›†æˆæµ‹è¯•ï¼š

| æ–‡ä»¶ | è¯´æ˜ |
|------|------|
| `test_api.py` | API æ¥å£æµ‹è¯• |
| `test_tools.py` | å·¥å…·æµ‹è¯• |
| `test_completions.py` | Completions æ¥å£æµ‹è¯• |

### examples/ - ç¤ºä¾‹ä»£ç 

å­˜æ”¾ç¤ºä¾‹ä»£ç å’Œæ¼”ç¤ºè„šæœ¬ã€‚

### data/ - æ•°æ®æ–‡ä»¶

å­˜æ”¾æ•°æ®æ–‡ä»¶ï¼Œå¦‚çŸ¥è¯†åº“æ–‡æ¡£ç­‰ã€‚

### logs/ - æ—¥å¿—ç›®å½•

å­˜æ”¾åº”ç”¨æ—¥å¿—æ–‡ä»¶ï¼ŒæŒ‰æ—¥æœŸåˆ†å‰²ã€‚

### volumes/ - Docker å·

Docker å®¹å™¨çš„æŒä¹…åŒ–æ•°æ®ï¼š

- `etcd/`: Etcd æ•°æ®
- `milvus/`: Milvus å‘é‡æ•°æ®
- `minio/`: MinIO å¯¹è±¡å­˜å‚¨

## ğŸ” æ–‡ä»¶å‘½åè§„èŒƒ

### Python æ–‡ä»¶

- æ¨¡å—åï¼šå°å†™å­—æ¯ï¼Œä¸‹åˆ’çº¿åˆ†éš”ï¼ˆå¦‚ `custom_tools.py`ï¼‰
- ç±»åï¼šå¤§é©¼å³°å‘½åï¼ˆå¦‚ `CalculatorTool`ï¼‰
- å‡½æ•°åï¼šå°å†™å­—æ¯ï¼Œä¸‹åˆ’çº¿åˆ†éš”ï¼ˆå¦‚ `get_available_tools`ï¼‰
- å¸¸é‡ï¼šå¤§å†™å­—æ¯ï¼Œä¸‹åˆ’çº¿åˆ†éš”ï¼ˆå¦‚ `MAX_TOKENS`ï¼‰

### æ–‡æ¡£æ–‡ä»¶

- ä½¿ç”¨å°å†™å­—æ¯å’Œè¿å­—ç¬¦ï¼ˆå¦‚ `api-reference.md`ï¼‰
- æˆ–ä½¿ç”¨ä¸‹åˆ’çº¿ï¼ˆå¦‚ `usage_examples.md`ï¼‰
- ä¿æŒä¸€è‡´æ€§

### é…ç½®æ–‡ä»¶

- `.env` æ–‡ä»¶ï¼šå¤§å†™å­—æ¯ï¼Œä¸‹åˆ’çº¿åˆ†éš”
- YAML/JSONï¼šå°å†™å­—æ¯ï¼Œä¸‹åˆ’çº¿æˆ–è¿å­—ç¬¦

## ğŸ“ ä»£ç ç»„ç»‡åŸåˆ™

### 1. å•ä¸€èŒè´£

æ¯ä¸ªæ¨¡å—ã€ç±»ã€å‡½æ•°åªè´Ÿè´£ä¸€ä¸ªåŠŸèƒ½ã€‚

### 2. åˆ†å±‚æ¶æ„

- API å±‚ï¼šå¤„ç† HTTP è¯·æ±‚
- ä¸šåŠ¡å±‚ï¼šæ™ºèƒ½ä½“é€»è¾‘
- å·¥å…·å±‚ï¼šå…·ä½“åŠŸèƒ½å®ç°
- æ•°æ®å±‚ï¼šæ•°æ®å­˜å‚¨å’Œè®¿é—®

### 3. ä¾èµ–æ³¨å…¥

é€šè¿‡é…ç½®å’Œå‚æ•°ä¼ é€’ä¾èµ–ï¼Œé¿å…ç¡¬ç¼–ç ã€‚

### 4. å¯æµ‹è¯•æ€§

ä»£ç åº”è¯¥æ˜“äºæµ‹è¯•ï¼Œé¿å…å…¨å±€çŠ¶æ€ã€‚

## ğŸ”§ æ‰©å±•æŒ‡å—

### æ·»åŠ æ–°å·¥å…·

1. åœ¨ `src/tools/` åˆ›å»ºæ–°æ–‡ä»¶
2. å®ç°å·¥å…·ç±»
3. åœ¨ `src/tools/__init__.py` æ³¨å†Œ
4. æ·»åŠ æµ‹è¯•

### æ·»åŠ æ–° API

1. åœ¨ `src/api/routes.py` æˆ–åˆ›å»ºæ–°è·¯ç”±æ–‡ä»¶
2. å®šä¹‰è·¯ç”±å’Œå¤„ç†å‡½æ•°
3. åœ¨ `src/api/models.py` å®šä¹‰æ•°æ®æ¨¡å‹
4. åœ¨ `src/api/main.py` æ³¨å†Œè·¯ç”±
5. æ›´æ–° API æ–‡æ¡£

### æ·»åŠ æ–°æ–‡æ¡£

1. åœ¨ `docs/` åˆ›å»º Markdown æ–‡ä»¶
2. åœ¨ `docs/README.md` æ·»åŠ é“¾æ¥
3. æ›´æ–°ä¸» `README.md`ï¼ˆå¦‚éœ€è¦ï¼‰

## ç›¸å…³æ–‡æ¡£

- [å¼€å‘æŒ‡å—](development-guide.md)
- [æ¶æ„è®¾è®¡](architecture.md)
- [è´¡çŒ®æŒ‡å—](../CONTRIBUTING.md)

---

å¦‚æœ‰ç–‘é—®ï¼Œè¯·æŸ¥çœ‹ [FAQ](faq.md) æˆ–æäº¤ [Issue](https://github.com/wssaidong/cus-ai-agent/issues)ã€‚

