# å¤šæ™ºèƒ½ä½“ç³»ç»Ÿå®ç°æ€»ç»“

## ğŸ“‹ é¡¹ç›®æ¦‚è¿°

æœ¬æ–‡æ¡£æ€»ç»“äº† cus-ai-agent é¡¹ç›®çš„å¤šæ™ºèƒ½ä½“ç³»ç»Ÿæ”¹é€ å·¥ä½œã€‚

**å‚è€ƒé¡¹ç›®**: [TradingAgents-CN](https://github.com/hsliuping/TradingAgents-CN)

**æ”¹é€ ç›®æ ‡**: å°†å•æ™ºèƒ½ä½“ç³»ç»Ÿå‡çº§ä¸ºæ”¯æŒå¤šæ™ºèƒ½ä½“åä½œçš„æ¶æ„

---

## âœ… å®Œæˆçš„å·¥ä½œ

### 1. æ¶æ„è®¾è®¡ âœ“

**æ–‡ä»¶**: `docs/solutions/multi-agent-architecture.md`

- å®šä¹‰äº†å¤šæ™ºèƒ½ä½“ç³»ç»Ÿæ¶æ„
- è®¾è®¡äº† 4 ç§åä½œæ¨¡å¼:é¡ºåºã€å¹¶è¡Œã€å±‚çº§ã€åé¦ˆ
- è§„åˆ’äº† 5 ç§ä¸“ä¸šæ™ºèƒ½ä½“ç±»å‹
- ç»˜åˆ¶äº†ç³»ç»Ÿæ¶æ„å›¾å’Œåä½œæµç¨‹å›¾

### 2. æ ¸å¿ƒæ¡†æ¶å®ç° âœ“

#### 2.1 åŸºç¡€æŠ½è±¡ç±»

**æ–‡ä»¶**: `src/agent/multi_agent/base_agent.py`

- `BaseAgent`: æ‰€æœ‰æ™ºèƒ½ä½“çš„æŠ½è±¡åŸºç±»
- `AgentType`: æ™ºèƒ½ä½“ç±»å‹æšä¸¾
- `AgentStatus`: æ™ºèƒ½ä½“çŠ¶æ€æšä¸¾
- `AgentCapability`: æ™ºèƒ½ä½“èƒ½åŠ›å®šä¹‰
- `AgentMetadata`: æ™ºèƒ½ä½“å…ƒæ•°æ®

#### 2.2 çŠ¶æ€ç®¡ç†

**æ–‡ä»¶**: `src/agent/multi_agent/multi_agent_state.py`

- `MultiAgentState`: å¤šæ™ºèƒ½ä½“å…±äº«çŠ¶æ€
- è¾…åŠ©å‡½æ•°: `create_initial_state()`, `update_agent_result()`, `mark_finished()`, `mark_error()`

#### 2.3 æ™ºèƒ½ä½“æ³¨å†Œä¸­å¿ƒ

**æ–‡ä»¶**: `src/agent/multi_agent/agent_registry.py`

- å•ä¾‹æ¨¡å¼çš„æ™ºèƒ½ä½“æ³¨å†Œä¸­å¿ƒ
- æ”¯æŒæŒ‰ç±»å‹ã€èƒ½åŠ›æŸ¥è¯¢æ™ºèƒ½ä½“
- æä¾›æ™ºèƒ½ä½“ç”Ÿå‘½å‘¨æœŸç®¡ç†
- ç»Ÿè®¡ä¿¡æ¯æ”¶é›†

#### 2.4 æ™ºèƒ½ä½“åè°ƒå™¨

**æ–‡ä»¶**: `src/agent/multi_agent/agent_coordinator.py`

- å®ç° 4 ç§åä½œæ¨¡å¼çš„è°ƒåº¦é€»è¾‘
- ä»»åŠ¡åˆ†é…å’Œç»“æœèšåˆ
- æ™ºèƒ½ä½“é€‰æ‹©å’Œè·¯ç”±

### 3. ä¸“ä¸šæ™ºèƒ½ä½“å®ç° âœ“

#### 3.1 AnalystAgent (åˆ†æå¸ˆ)

**æ–‡ä»¶**: `src/agent/multi_agent/agents/analyst_agent.py`

**èƒ½åŠ›**:
- éœ€æ±‚åˆ†æ
- ä¿¡æ¯æ£€ç´¢
- æ•°æ®åˆ†æ
- æ´å¯Ÿæå–

#### 3.2 PlannerAgent (è§„åˆ’å¸ˆ)

**æ–‡ä»¶**: `src/agent/multi_agent/agents/planner_agent.py`

**èƒ½åŠ›**:
- ä»»åŠ¡åˆ†è§£
- ç­–ç•¥è§„åˆ’
- èµ„æºåˆ†é…
- é£é™©è¯„ä¼°

#### 3.3 ExecutorAgent (æ‰§è¡Œè€…)

**æ–‡ä»¶**: `src/agent/multi_agent/agents/executor_agent.py`

**èƒ½åŠ›**:
- å·¥å…·è°ƒç”¨
- ä»»åŠ¡æ‰§è¡Œ
- ç»“æœç”Ÿæˆ
- é”™è¯¯å¤„ç†

**ç‰¹æ€§**: é›†æˆäº†ç°æœ‰çš„å·¥å…·ç³»ç»Ÿ

#### 3.4 ReviewerAgent (è¯„å®¡è€…)

**æ–‡ä»¶**: `src/agent/multi_agent/agents/reviewer_agent.py`

**èƒ½åŠ›**:
- ç»“æœéªŒè¯
- è´¨é‡è¯„ä¼°
- é”™è¯¯æ£€æµ‹
- æ”¹è¿›å»ºè®®

#### 3.5 ResearcherAgent (ç ”ç©¶å‘˜)

**æ–‡ä»¶**: `src/agent/multi_agent/agents/researcher_agent.py`

**èƒ½åŠ›**:
- æ·±åº¦ç ”ç©¶
- çŸ¥è¯†æ•´åˆ
- æ–‡æ¡£ç”Ÿæˆ
- å¼•ç”¨ç®¡ç†

### 4. LangGraph åä½œå›¾ âœ“

**æ–‡ä»¶**: `src/agent/multi_agent/multi_agent_graph.py`

**å®ç°å†…å®¹**:
- åˆ›å»º StateGraph å®šä¹‰å¤šæ™ºèƒ½ä½“å·¥ä½œæµ
- å®ç° 6 ä¸ªèŠ‚ç‚¹: coordinator, analyst, planner, executor, reviewer, researcher
- å®ç°è·¯ç”±é€»è¾‘æ”¯æŒä¸åŒåä½œæ¨¡å¼
- é›†æˆ InMemorySaver å®ç°ä¼šè¯è®°å¿†
- æä¾›å…¨å±€å›¾å®ä¾‹ `multi_agent_graph`

**å·¥ä½œæµç¨‹**:
```
Entry â†’ Coordinator â†’ [Agent Selection] â†’ Agent Node â†’ Coordinator â†’ ...
```

### 5. REST API æ¥å£ âœ“

**æ–‡ä»¶**: `src/api/multi_agent_routes.py`

**ç«¯ç‚¹**:
- `POST /api/v1/multi-agent/tasks` - æ‰§è¡Œå¤šæ™ºèƒ½ä½“ä»»åŠ¡
- `GET /api/v1/multi-agent/agents` - è·å–æ™ºèƒ½ä½“åˆ—è¡¨
- `GET /api/v1/multi-agent/agents/{agent_id}` - è·å–æ™ºèƒ½ä½“è¯¦æƒ…
- `GET /api/v1/multi-agent/statistics` - è·å–ç»Ÿè®¡ä¿¡æ¯
- `POST /api/v1/multi-agent/test/sequential` - æµ‹è¯•é¡ºåºæ¨¡å¼
- `POST /api/v1/multi-agent/test/feedback` - æµ‹è¯•åé¦ˆæ¨¡å¼

**é›†æˆ**: å·²é›†æˆåˆ° `src/api/main.py`

### 6. æ–‡æ¡£å’Œç¤ºä¾‹ âœ“

#### 6.1 ä½¿ç”¨æŒ‡å—

**æ–‡ä»¶**: `docs/solutions/multi-agent-usage-guide.md`

**å†…å®¹**:
- å¿«é€Ÿå¼€å§‹æŒ‡å—
- æ™ºèƒ½ä½“ä»‹ç»
- åä½œæ¨¡å¼è¯´æ˜
- API æ¥å£æ–‡æ¡£
- ä½¿ç”¨ç¤ºä¾‹
- æœ€ä½³å®è·µ
- æ•…éšœæ’æŸ¥

#### 6.2 ç¤ºä¾‹ä»£ç 

**æ–‡ä»¶**: `examples/multi_agent_example.py`

**ç¤ºä¾‹**:
- ç¤ºä¾‹ 1: é¡ºåºåä½œæ¨¡å¼
- ç¤ºä¾‹ 2: åé¦ˆåä½œæ¨¡å¼
- ç¤ºä¾‹ 3: ç ”ç©¶ä»»åŠ¡
- ç¤ºä¾‹ 4: ä½¿ç”¨å•ä¸ªæ™ºèƒ½ä½“
- ç¤ºä¾‹ 5: æ™ºèƒ½ä½“æ³¨å†Œä¸­å¿ƒ

#### 6.3 æµ‹è¯•è„šæœ¬

**æ–‡ä»¶**: `scripts/test_multi_agent.sh`

**åŠŸèƒ½**:
- æ£€æŸ¥æœåŠ¡çŠ¶æ€
- æµ‹è¯•æ‰€æœ‰ API ç«¯ç‚¹
- éªŒè¯åä½œæ¨¡å¼

---

## ğŸ“Š ç³»ç»Ÿæ¶æ„

### æ ¸å¿ƒç»„ä»¶

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    FastAPI Application                   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                  Multi-Agent Routes                      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                  Multi-Agent Graph                       â”‚
â”‚              (LangGraph StateGraph)                      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                  Agent Coordinator                       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                  Agent Registry                          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Analyst  â”‚  Planner  â”‚  Executor  â”‚  Reviewer  â”‚  Researcher  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                    Base Agent                            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚              LLM (OpenAI-compatible)                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### åä½œæ¨¡å¼

#### 1. é¡ºåºåä½œ (Sequential)
```
Analyst â†’ Planner â†’ Executor â†’ Reviewer â†’ End
```

#### 2. å¹¶è¡Œåä½œ (Parallel)
```
        â”Œâ”€ Agent 1 â”€â”
Start â”€â”€â”¼â”€ Agent 2 â”€â”¼â”€â”€ Aggregate â†’ End
        â””â”€ Agent 3 â”€â”˜
```

#### 3. å±‚çº§åä½œ (Hierarchical)
```
Coordinator
    â”œâ”€ Sub-Agent 1
    â”œâ”€ Sub-Agent 2
    â””â”€ Sub-Agent 3
```

#### 4. åé¦ˆåä½œ (Feedback Loop)
```
Executor â†’ Reviewer â”€â”€â”
   â†‘                  â”‚
   â””â”€â”€â”€â”€ (if failed) â”€â”˜
```

---

## ğŸ”§ æŠ€æœ¯æ ˆ

- **æ¡†æ¶**: LangGraph 0.2.x
- **LLM**: OpenAI-compatible APIs
- **Web**: FastAPI
- **è®°å¿†**: InMemorySaver (LangGraph 1.0+)
- **å·¥å…·**: ç°æœ‰å·¥å…·ç³»ç»Ÿé›†æˆ
- **è¯­è¨€**: Python 3.10+

---

## ğŸ“ æ–‡ä»¶ç»“æ„

```
src/agent/multi_agent/
â”œâ”€â”€ __init__.py                    # æ¨¡å—å¯¼å‡º
â”œâ”€â”€ base_agent.py                  # åŸºç¡€æŠ½è±¡ç±»
â”œâ”€â”€ multi_agent_state.py           # çŠ¶æ€å®šä¹‰
â”œâ”€â”€ agent_registry.py              # æ™ºèƒ½ä½“æ³¨å†Œä¸­å¿ƒ
â”œâ”€â”€ agent_coordinator.py           # æ™ºèƒ½ä½“åè°ƒå™¨
â”œâ”€â”€ multi_agent_graph.py           # LangGraph åä½œå›¾
â””â”€â”€ agents/
    â”œâ”€â”€ __init__.py
    â”œâ”€â”€ analyst_agent.py           # åˆ†æå¸ˆ
    â”œâ”€â”€ planner_agent.py           # è§„åˆ’å¸ˆ
    â”œâ”€â”€ executor_agent.py          # æ‰§è¡Œè€…
    â”œâ”€â”€ reviewer_agent.py          # è¯„å®¡è€…
    â””â”€â”€ researcher_agent.py        # ç ”ç©¶å‘˜

src/api/
â””â”€â”€ multi_agent_routes.py          # API è·¯ç”±

docs/solutions/
â”œâ”€â”€ multi-agent-architecture.md    # æ¶æ„è®¾è®¡
â”œâ”€â”€ multi-agent-usage-guide.md     # ä½¿ç”¨æŒ‡å—
â””â”€â”€ multi-agent-implementation-summary.md  # å®ç°æ€»ç»“

examples/
â””â”€â”€ multi_agent_example.py         # ä½¿ç”¨ç¤ºä¾‹

scripts/
â””â”€â”€ test_multi_agent.sh            # æµ‹è¯•è„šæœ¬
```

---

## ğŸš€ å¿«é€Ÿå¼€å§‹

### 1. å¯åŠ¨æœåŠ¡

```bash
python run.py
```

### 2. æµ‹è¯• API

```bash
# è·å–æ™ºèƒ½ä½“åˆ—è¡¨
curl http://localhost:8000/api/v1/multi-agent/agents

# æ‰§è¡Œä»»åŠ¡
curl -X POST http://localhost:8000/api/v1/multi-agent/tasks \
  -H "Content-Type: application/json" \
  -d '{
    "description": "åˆ†æå¹¶åˆ¶å®šäº§å“è®¡åˆ’",
    "coordination_mode": "sequential"
  }'
```

### 3. è¿è¡Œç¤ºä¾‹

```bash
python examples/multi_agent_example.py
```

### 4. è¿è¡Œæµ‹è¯•

```bash
bash scripts/test_multi_agent.sh
```

---

## ğŸ¯ æ ¸å¿ƒç‰¹æ€§

### 1. çµæ´»çš„åä½œæ¨¡å¼

æ”¯æŒ 4 ç§åä½œæ¨¡å¼,é€‚åº”ä¸åŒåœºæ™¯:
- é¡ºåº: æœ‰æ˜ç¡®æ‰§è¡Œé¡ºåºçš„ä»»åŠ¡
- å¹¶è¡Œ: ç‹¬ç«‹å­ä»»åŠ¡çš„å¹¶è¡Œå¤„ç†
- å±‚çº§: å¤æ‚çš„å¤šå±‚æ¬¡ä»»åŠ¡
- åé¦ˆ: éœ€è¦è¿­ä»£ä¼˜åŒ–çš„ä»»åŠ¡

### 2. å¯æ‰©å±•çš„æ™ºèƒ½ä½“ç³»ç»Ÿ

- åŸºäºæŠ½è±¡ç±»çš„è®¾è®¡,æ˜“äºæ‰©å±•
- èƒ½åŠ›é©±åŠ¨çš„æ™ºèƒ½ä½“é€‰æ‹©
- ç»Ÿä¸€çš„æ¥å£å’Œå…ƒæ•°æ®ç®¡ç†

### 3. å®Œæ•´çš„çŠ¶æ€ç®¡ç†

- å…±äº«çŠ¶æ€åœ¨æ™ºèƒ½ä½“é—´ä¼ é€’
- æ”¯æŒä¼šè¯è®°å¿† (InMemorySaver)
- å®Œæ•´çš„æ‰§è¡Œå†å²è®°å½•

### 4. å·¥å…·é›†æˆ

- ExecutorAgent é›†æˆç°æœ‰å·¥å…·ç³»ç»Ÿ
- æ”¯æŒåŠ¨æ€å·¥å…·è°ƒç”¨
- å·¥å…·æ‰§è¡Œç»“æœè‡ªåŠ¨å¤„ç†

### 5. REST API

- å®Œæ•´çš„ RESTful API
- æ”¯æŒå¼‚æ­¥æ‰§è¡Œ
- è¯¦ç»†çš„å“åº”ä¿¡æ¯

---

## ğŸ“ˆ ä¸ TradingAgents-CN çš„å¯¹æ¯”

| ç‰¹æ€§ | TradingAgents-CN | cus-ai-agent |
|------|------------------|--------------|
| æ¡†æ¶ | LangGraph | LangGraph |
| æ™ºèƒ½ä½“ç±»å‹ | é‡‘èäº¤æ˜“ä¸“ç”¨ | é€šç”¨ä»»åŠ¡ |
| åä½œæ¨¡å¼ | 3 ç§ | 4 ç§ |
| å·¥å…·é›†æˆ | é‡‘èå·¥å…· | é€šç”¨å·¥å…· |
| API | åŸºç¡€ API | å®Œæ•´ REST API |
| è®°å¿† | MemorySaver | InMemorySaver |
| æ–‡æ¡£ | ä¸­æ–‡ | ä¸­æ–‡ |

---

## ğŸ”® æœªæ¥æ”¹è¿›

### 1. æ€§èƒ½ä¼˜åŒ–

- [ ] æ™ºèƒ½ä½“ç»“æœç¼“å­˜
- [ ] å¹¶è¡Œæ‰§è¡Œä¼˜åŒ–
- [ ] æµå¼å“åº”æ”¯æŒ

### 2. åŠŸèƒ½å¢å¼º

- [ ] æ›´å¤šä¸“ä¸šæ™ºèƒ½ä½“ (å¦‚ CodeReviewer, DataAnalyst)
- [ ] æ™ºèƒ½ä½“çƒ­åŠ è½½
- [ ] è‡ªå®šä¹‰åä½œæ¨¡å¼

### 3. ç›‘æ§å’Œè°ƒè¯•

- [ ] æ‰§è¡Œè¿‡ç¨‹å¯è§†åŒ–
- [ ] æ€§èƒ½æŒ‡æ ‡æ”¶é›†
- [ ] è°ƒè¯•å·¥å…·

### 4. æµ‹è¯•

- [ ] å•å…ƒæµ‹è¯•è¦†ç›–
- [ ] é›†æˆæµ‹è¯•
- [ ] æ€§èƒ½æµ‹è¯•

---

## ğŸ“š ç›¸å…³æ–‡æ¡£

- [å¤šæ™ºèƒ½ä½“æ¶æ„è®¾è®¡](./multi-agent-architecture.md)
- [ä½¿ç”¨æŒ‡å—](./multi-agent-usage-guide.md)
- [API æ–‡æ¡£](http://localhost:8000/docs)
- [TradingAgents-CN](https://github.com/hsliuping/TradingAgents-CN)

---

## ğŸ™ è‡´è°¢

æ„Ÿè°¢ [TradingAgents-CN](https://github.com/hsliuping/TradingAgents-CN) é¡¹ç›®æä¾›çš„è®¾è®¡çµæ„Ÿå’Œå‚è€ƒå®ç°ã€‚

---

**åˆ›å»ºæ—¶é—´**: 2025-11-04  
**ç‰ˆæœ¬**: 1.0.0  
**çŠ¶æ€**: âœ… å·²å®Œæˆ

